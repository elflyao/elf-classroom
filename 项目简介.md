- **项目简介**


这是一个试图取代各种电子教室软件的作品
网络通信采用纯IPv6协议


- **通讯协议设定**

  1. **角色设定**
     角色分服务端，客户端两种，服务端提供文件分发，广播教学等常规功能，客户端接受文件，广播，同时承担文件分发广播教学的分流功能

  2. **服务注册与发现协议设定**
     （1）约定FF02::E1F:14A0为服务注册与发现的多播组，未来实现多频道功能，则最右边的14A0，采取14A0+i*4的形式往上增加，理论上直到FF02::E1F:FFFC为止
     （2）服务端登录后每6秒广播一次“ELFCLASSROOM”。
     
     （3）客户端登陆后，接收到广播消息。
     
     （4）然后客户端发送“LOGIN 计算机名”给服务端。
     
     （5）服务端回复“LOGIN OK”给客户端，同时记录客户端计算机名，地址并置客户端为在线状态。
     
     （6）客户端接收回复后，记录服务端地址，置服务端为在线状态。
     
     （7）如果服务端在线则暂停接收服务注册广播。
     
     （8）如果服务器超时未回复，则忽略LOGIN注册，继续接收服务注册广播，置服务端为断线状态。
     
  3. **断线检测**
  
     ====客户端检测====
  
     （1）客户端登录服务端后，激活断线检测功能，每6秒发送“ALIVE”给服务端。
  
     （2）服务端收到ALIVE后，发送“ALIVE OK”给客户端。
  
     （3）服务端置对应客户端timeout=0, 同时置客户端为在线状态。
  
     （4）客户端收到回复后，置服务端为在线状态。
  
     ====服务端检测====
  
     （1）服务端定时器6秒一次，遍历所有客户端列表，对列表的timeout+1。
  
     （2）如果某客户端timeout>=3，则置该客户端断线状态。
  
  4. **文件分发与收集协议**
     
  ====行为约定====
     
     文件分发指从服务端文件系统里把一个或者多个文件、文件夹群发给客户端。
     
     文件收集指从客户端把一个或者多个文件、文件夹提交给服务端。
     
     ====文件分发====
     
     （1）文件分发采取多播方式进行，约定多播组FF02::E1F:14A0，未来实现多频道功能，则最右边的14A1，采取14A1+i*4的形式往上增加，理论上直到FF02::E1F:FFFD为止
     
     （2）考虑到文件里可能存在空格等符号，统一对文件名进行BASE64编码后再传输。对服务端要分发的文件称为源文件F、源文件夹D，然后读取后形成源文件列表FileList，源文件列表里，对要分发到客户端的文件夹位置称为目的文件夹Dst.
     
  5. 
  
  6. 
  
     